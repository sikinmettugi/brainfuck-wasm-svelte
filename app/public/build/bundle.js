!function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function o(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(t,e){t.appendChild(e)}function a(t,e,n){t.insertBefore(e,n||null)}function c(t){t.parentNode.removeChild(t)}function u(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function l(t){return document.createElement(t)}function p(t){return document.createTextNode(t)}function f(){return p(" ")}function d(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function _(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function g(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function h(t,e){t.value=null==e?"":e}let b;function m(t){b=t}const w=[],y=[],v=[],$=[],x=Promise.resolve();let k=!1;function S(t){v.push(t)}let A=!1;const I=new Set;function E(){if(!A){A=!0;do{for(let t=0;t<w.length;t+=1){const e=w[t];m(e),j(e.$$)}for(m(null),w.length=0;y.length;)y.pop()();for(let t=0;t<v.length;t+=1){const e=v[t];I.has(e)||(I.add(e),e())}v.length=0}while(w.length);for(;$.length;)$.pop()();k=!1,A=!1,I.clear()}}function j(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(S)}}const q=new Set;function O(t,e){t&&t.i&&(q.delete(t),t.i(e))}function R(t,e,n,r){if(t&&t.o){if(q.has(t))return;q.add(t),undefined.c.push((()=>{q.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}function C(t){t&&t.c()}function W(t,n,s){const{fragment:i,on_mount:a,on_destroy:c,after_update:u}=t.$$;i&&i.m(n,s),S((()=>{const n=a.map(e).filter(o);c?c.push(...n):r(n),t.$$.on_mount=[]})),u.forEach(S)}function B(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function M(t,e){-1===t.$$.dirty[0]&&(w.push(t),k||(k=!0,x.then(E)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function T(e,o,s,i,a,u,l=[-1]){const p=b;m(e);const f=o.props||{},d=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:a,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(p?p.$$.context:[]),callbacks:n(),dirty:l,skip_bound:!1};let _=!1;if(d.ctx=s?s(e,f,((t,n,...r)=>{const o=r.length?r[0]:n;return d.ctx&&a(d.ctx[t],d.ctx[t]=o)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](o),_&&M(e,t)),n})):[],d.update(),_=!0,r(d.before_update),d.fragment=!!i&&i(d.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);d.fragment&&d.fragment.l(t),t.forEach(c)}else d.fragment&&d.fragment.c();o.intro&&O(e.$$.fragment),W(e,o.target,o.anchor),E()}m(p)}class L{$destroy(){B(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function N(t,e,n){const r=t.slice();return r[3]=e[n],r}function P(t){let e,n,r=t[3]+"";return{c(){e=l("li"),n=p(r),_(e,"class","svelte-101lqhl")},m(t,r){a(t,e,r),i(e,n)},p(t,e){1&e&&r!==(r=t[3]+"")&&g(n,r)},d(t){t&&c(e)}}}function U(e){let n,r,o,s,p,d,g,h,b=e[0],m=[];for(let t=0;t<b.length;t+=1)m[t]=P(N(e,b,t));return{c(){n=l("section"),r=l("div"),o=l("ul");for(let t=0;t<m.length;t+=1)m[t].c();var t,i,a;s=f(),p=l("li"),p.textContent="(...)",d=f(),g=l("div"),h=l("em"),_(p,"class","tape-elem-rightmost svelte-101lqhl"),_(o,"class","tape svelte-101lqhl"),_(h,"class","svelte-101lqhl"),_(g,"class","tape-pointer svelte-101lqhl"),_(g,"style",e[1]),_(r,"id","bf-interface-state-block"),t="display",i="inline-block",r.style.setProperty(t,i,a?"important":""),_(r,"class","svelte-101lqhl"),_(n,"id","bf-interface-machine-state"),_(n,"class","svelte-101lqhl")},m(t,e){a(t,n,e),i(n,r),i(r,o);for(let t=0;t<m.length;t+=1)m[t].m(o,null);i(o,s),i(o,p),i(r,d),i(r,g),i(g,h)},p(t,[e]){if(1&e){let n;for(b=t[0],n=0;n<b.length;n+=1){const r=N(t,b,n);m[n]?m[n].p(r,e):(m[n]=P(r),m[n].c(),m[n].m(o,s))}for(;n<m.length;n+=1)m[n].d(1);m.length=b.length}2&e&&_(g,"style",t[1])},i:t,o:t,d(t){t&&c(n),u(m,t)}}}function D(t,e,n){let r,{tapes:o}=e,{tapeIndex:s}=e;return t.$$set=t=>{"tapes"in t&&n(0,o=t.tapes),"tapeIndex"in t&&n(2,s=t.tapeIndex)},t.$$.update=()=>{4&t.$$.dirty&&n(1,r=`margin-left: ${6+32*s}px`)},[o,r,s]}class z extends L{constructor(t){super(),T(this,t,D,U,s,{tapes:0,tapeIndex:2})}}function F(t,e,n){const r=t.slice();return r[16]=e[n],r}function H(t){let e,n;return{c(){e=l("div"),n=p(t[6]),_(e,"id","bf-interface-error-box"),_(e,"class","svelte-wkoo8r")},m(t,r){a(t,e,r),i(e,n)},p(t,e){64&e&&g(n,t[6])},d(t){t&&c(e)}}}function V(t){let e,n,r,s,u,h,b=t[16].description+"";return{c(){e=l("li"),n=l("button"),r=p(b),s=f(),_(e,"class","svelte-wkoo8r")},m(c,l){a(c,e,l),i(e,n),i(n,r),i(e,s),u||(h=d(n,"click",(function(){o(t[8](t[16]))&&t[8](t[16]).apply(this,arguments)})),u=!0)},p(e,n){t=e,2&n&&b!==(b=t[16].description+"")&&g(r,b)},d(t){t&&c(e),u=!1,h()}}}function G(t){let e,n,o,s,g,b,m,w,y,v,$,x,k,S,A,I,E,j,q,M,T,L,N,P,U,D,G,J,K,Q;m=new z({props:{tapes:t[0].get_display_tapes(32),tapeIndex:t[0].get_index()}});let X=t[6]&&H(t),Y=t[1],Z=[];for(let e=0;e<Y.length;e+=1)Z[e]=V(F(t,Y,e));return{c(){e=l("div"),n=l("div"),o=l("textarea"),s=f(),g=l("button"),g.textContent="Run",b=f(),C(m.$$.fragment),w=f(),y=l("section"),v=l("div"),$=p("Input:\n            "),x=l("textarea"),k=f(),S=l("div"),A=p("Output:\n            "),I=l("textarea"),E=f(),j=l("br"),q=f(),M=l("input"),T=l("label"),T.textContent="Print in dec",L=f(),N=l("div"),X&&X.c(),P=f(),U=l("section"),D=l("div"),G=l("ul");for(let t=0;t<Z.length;t+=1)Z[t].c();_(o,"id","bf-input-program"),_(o,"name","bf-program-input"),_(g,"class","bf-button-input"),_(g,"type","button"),_(n,"id","bf-interface-input-area"),_(x,"id","bf-input-stream"),_(v,"id","bf-interface-input-area"),_(I,"id","bf-output-stream"),_(I,"name","bf-output-stream"),I.readOnly=!0,I.value=t[3],_(M,"type","checkbox"),_(M,"id","bf-output-print-hex"),_(T,"for","bf-output-print-hex"),_(S,"id","bf-interface-output-area"),_(N,"id","bf-interface-errors"),_(y,"class","bf-interface-io svelte-wkoo8r"),_(G,"class","presets svelte-wkoo8r"),_(D,"id","bf-interface-presets"),_(U,"class","bf-interface-preset svelte-wkoo8r"),_(e,"id","bf-interface"),_(e,"class","svelte-wkoo8r")},m(r,c){a(r,e,c),i(e,n),i(n,o),h(o,t[5]),i(n,s),i(n,g),i(e,b),W(m,e,null),i(e,w),i(e,y),i(y,v),i(v,$),i(v,x),h(x,t[2]),i(y,k),i(y,S),i(S,A),i(S,I),i(S,E),i(S,j),i(S,q),i(S,M),M.checked=t[4],i(S,T),i(y,L),i(y,N),X&&X.m(N,null),i(e,P),i(e,U),i(U,D),i(D,G);for(let t=0;t<Z.length;t+=1)Z[t].m(G,null);J=!0,K||(Q=[d(o,"input",t[11]),d(g,"click",t[7]),d(x,"input",t[12]),d(M,"change",t[13])],K=!0)},p(t,[e]){32&e&&h(o,t[5]);const n={};if(1&e&&(n.tapes=t[0].get_display_tapes(32)),1&e&&(n.tapeIndex=t[0].get_index()),m.$set(n),4&e&&h(x,t[2]),(!J||8&e)&&(I.value=t[3]),16&e&&(M.checked=t[4]),t[6]?X?X.p(t,e):(X=H(t),X.c(),X.m(N,null)):X&&(X.d(1),X=null),258&e){let n;for(Y=t[1],n=0;n<Y.length;n+=1){const r=F(t,Y,n);Z[n]?Z[n].p(r,e):(Z[n]=V(r),Z[n].c(),Z[n].m(G,null))}for(;n<Z.length;n+=1)Z[n].d(1);Z.length=Y.length}},i(t){J||(O(m.$$.fragment,t),J=!0)},o(t){R(m.$$.fragment,t),J=!1},d(t){t&&c(e),B(m),X&&X.d(),u(Z,t),K=!1,r(Q)}}}function J(t,e,n){let{state:r}=e,{program:o}=e,{newState:s}=e,{presets:i}=e,a="",c="(stream output shows here)",u=!1,l="",p={},f="";function d(t){let e=a.split(/[\s,]+/);return console.log(e),!!e.every((t=>{return e=t,!isNaN(e)&&!isNaN(parseFloat(e))&&parseInt(e)>=0&&parseInt(e)<256;var e}))&&(t.push_input(e.map((t=>parseInt(t)))),!0)}return t.$$set=t=>{"state"in t&&n(0,r=t.state),"program"in t&&n(9,o=t.program),"newState"in t&&n(10,s=t.newState),"presets"in t&&n(1,i=t.presets)},[r,i,a,c,u,l,f,function(){if(l)try{if(n(0,r=s()),p=o.parse(l),console.log(typeof p,p),p.needs_input()){if(!a)throw new Error("The input is empty!");if(!d(r))throw new Error("Invalid input: should be a space/comma separated unsigned 8-bit integers!")}p.execute(r),n(3,c=u?r.output_dec():r.output()),n(6,f="")}catch(t){console.error(t),n(6,f=t.toString())}else n(6,f="The program is empty!")},function(t){t&&(console.log("running preset",t),n(5,l=t.program),n(4,u=t.outputAsDec),t.inputs&&n(2,a=t.inputs))},o,s,function(){l=this.value,n(5,l)},function(){a=this.value,n(2,a)},function(){u=this.checked,n(4,u)}]}class K extends L{constructor(t){super(),T(this,t,J,G,s,{state:0,program:9,newState:10,presets:1})}}function Q(t){let e,n,r,o,s,u,p,d,g;return d=new K({props:{state:t[0],program:t[1],newState:t[2],presets:t[3]}}),{c(){e=l("main"),n=l("h1"),n.textContent="brainf-wasm",r=f(),o=l("p"),o.textContent="A BrainF*ck Interpreter compiled into WASM loaded on Svelte",s=f(),u=l("p"),u.innerHTML='Visit the <a href="https://svelte.dev/tutorial">Svelte tutorial</a> to learn how to build Svelte apps.',p=f(),C(d.$$.fragment),_(n,"class","svelte-1vzax5j"),_(e,"class","svelte-1vzax5j")},m(t,c){a(t,e,c),i(e,n),i(e,r),i(e,o),i(e,s),i(e,u),i(e,p),W(d,e,null),g=!0},p(t,[e]){const n={};1&e&&(n.state=t[0]),2&e&&(n.program=t[1]),4&e&&(n.newState=t[2]),8&e&&(n.presets=t[3]),d.$set(n)},i(t){g||(O(d.$$.fragment,t),g=!0)},o(t){R(d.$$.fragment,t),g=!1},d(t){t&&c(e),B(d)}}}function X(t,e,n){let{state:r}=e,{program:o}=e,{newState:s}=e,{presets:i}=e;return t.$$set=t=>{"state"in t&&n(0,r=t.state),"program"in t&&n(1,o=t.program),"newState"in t&&n(2,s=t.newState),"presets"in t&&n(3,i=t.presets)},[r,o,s,i]}class Y extends L{constructor(t){super(),T(this,t,X,Q,s,{state:0,program:1,newState:2,presets:3})}}let Z;const tt=new Array(32).fill(void 0);function et(t){return tt[t]}tt.push(void 0,null,!0,!1);let nt=tt.length;function rt(t){const e=et(t);return function(t){t<36||(tt[t]=nt,nt=t)}(t),e}let ot=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});ot.decode();let st=null;function it(){return null!==st&&st.buffer===Z.memory.buffer||(st=new Uint8Array(Z.memory.buffer)),st}function at(t,e){return ot.decode(it().subarray(t,t+e))}function ct(t){nt===tt.length&&tt.push(tt.length+1);const e=nt;return nt=tt[e],tt[e]=t,e}let ut=null;function lt(){return null!==ut&&ut.buffer===Z.memory.buffer||(ut=new Int32Array(Z.memory.buffer)),ut}let pt=0;let ft=new TextEncoder("utf-8");const dt="function"==typeof ft.encodeInto?function(t,e){return ft.encodeInto(t,e)}:function(t,e){const n=ft.encode(t);return e.set(n),{read:t.length,written:n.length}};function _t(t,e,n){if(void 0===n){const n=ft.encode(t),r=e(n.length);return it().subarray(r,r+n.length).set(n),pt=n.length,r}let r=t.length,o=e(r);const s=it();let i=0;for(;i<r;i++){const e=t.charCodeAt(i);if(e>127)break;s[o+i]=e}if(i!==r){0!==i&&(t=t.slice(i)),o=n(o,r,r=i+3*t.length);const e=it().subarray(o+i,o+r);i+=dt(t,e).written}return pt=i,o}function gt(t,e){if(!(t instanceof e))throw new Error("expected instance of "+e.name);return t.ptr}class ht{static __wrap(t){const e=Object.create(ht.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Z.__wbg_bfmachinestate_free(t)}static new(){var t=Z.bfmachinestate_new();return ht.__wrap(t)}output(){try{const n=Z.__wbindgen_add_to_stack_pointer(-16);Z.bfmachinestate_output(n,this.ptr);var t=lt()[n/4+0],e=lt()[n/4+1];return at(t,e)}finally{Z.__wbindgen_add_to_stack_pointer(16),Z.__wbindgen_free(t,e)}}output_dec(){try{const n=Z.__wbindgen_add_to_stack_pointer(-16);Z.bfmachinestate_output_dec(n,this.ptr);var t=lt()[n/4+0],e=lt()[n/4+1];return at(t,e)}finally{Z.__wbindgen_add_to_stack_pointer(16),Z.__wbindgen_free(t,e)}}get_index(){return Z.bfmachinestate_get_index(this.ptr)>>>0}push_input(t){var e=function(t,e){const n=e(1*t.length);return it().set(t,n/1),pt=t.length,n}(t,Z.__wbindgen_malloc),n=pt;Z.bfmachinestate_push_input(this.ptr,e,n)}get_input(){var t=Z.bfmachinestate_get_input(this.ptr);return 16777215===t?void 0:t}log_input(){var t=Z.bfmachinestate_log_input(this.ptr);return 16777215===t?void 0:t}get_tape_value(t){var e=Z.bfmachinestate_get_tape_value(this.ptr,t);return 16777215===e?void 0:e}get_display_tapes(t){try{const i=Z.__wbindgen_add_to_stack_pointer(-16);Z.bfmachinestate_get_display_tapes(i,this.ptr,t);var e=lt()[i/4+0],n=lt()[i/4+1],r=(o=e,s=n,it().subarray(o/1,o/1+s)).slice();return Z.__wbindgen_free(e,1*n),r}finally{Z.__wbindgen_add_to_stack_pointer(16)}var o,s}}class bt{static __wrap(t){const e=Object.create(bt.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Z.__wbg_bfprogram_free(t)}static parse(t){var e=_t(t,Z.__wbindgen_malloc,Z.__wbindgen_realloc),n=pt,r=Z.bfprogram_parse(e,n);return bt.__wrap(r)}step(t){gt(t,ht),Z.bfprogram_step(this.ptr,t.ptr)}execute(t){gt(t,ht),Z.bfprogram_execute(this.ptr,t.ptr)}needs_input(){return 0!==Z.bfprogram_needs_input(this.ptr)}}async function mt(t){void 0===t&&(t=new URL("index_bg.wasm",document.currentScript&&document.currentScript.src||new URL("bundle.js",document.baseURI).href));const e={wbg:{}};e.wbg.__wbindgen_object_drop_ref=function(t){rt(t)},e.wbg.__wbindgen_string_new=function(t,e){return ct(at(t,e))},e.wbg.__wbg_new_59cb74e423758ede=function(){return ct(new Error)},e.wbg.__wbg_stack_558ba5917b466edd=function(t,e){var n=_t(et(e).stack,Z.__wbindgen_malloc,Z.__wbindgen_realloc),r=pt;lt()[t/4+1]=r,lt()[t/4+0]=n},e.wbg.__wbg_error_4bb6c2a97407129a=function(t,e){try{console.error(at(t,e))}finally{Z.__wbindgen_free(t,e)}},e.wbg.__wbg_log_386a8115a84a780d=function(t){console.log(et(t))},e.wbg.__wbindgen_throw=function(t,e){throw new Error(at(t,e))},e.wbg.__wbindgen_rethrow=function(t){throw rt(t)},("string"==typeof t||"function"==typeof Request&&t instanceof Request||"function"==typeof URL&&t instanceof URL)&&(t=fetch(t));const{instance:n,module:r}=await async function(t,e){if("function"==typeof Response&&t instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(t,e)}catch(e){if("application/wasm"==t.headers.get("Content-Type"))throw e;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",e)}const n=await t.arrayBuffer();return await WebAssembly.instantiate(n,e)}{const n=await WebAssembly.instantiate(t,e);return n instanceof WebAssembly.Instance?{instance:n,module:t}:n}}(await t,e);return Z=n.exports,mt.__wbindgen_wasm_module=r,Z}var wt=Object.freeze({__proto__:null,greet:function(){try{const n=Z.__wbindgen_add_to_stack_pointer(-16);Z.greet(n);var t=lt()[n/4+0],e=lt()[n/4+1];return at(t,e)}finally{Z.__wbindgen_add_to_stack_pointer(16),Z.__wbindgen_free(t,e)}},BfMachineState:ht,BfProgram:bt,default:mt});const yt=[{name:"print-zero",description:"Print '0'",program:"++++++++[>++++++<-]>.",inputs:"",outputAsDec:!1},{name:"hello-world",description:"Hello World!",program:"++++++++++[>+++++++>++++++++++>+++>+<<<<-]>++.>+.+++++++..+++.>++.<<+++++++++++++++.>.+++.------.--------.>+.>.",inputs:"",outputAsDec:!1},{name:"sum-to-n",description:"Sum 1 to n (n < 23)",program:",[[>+>+<<-]>-[<+>-]<]>>.",inputs:"5",outputAsDec:!0}];(async()=>{const t=await(async(t={})=>{let{importHook:e,serverPath:n}=t,r="/build/assets/svelte-wasm-brainf-greeting-65dbe555.wasm";return null!=n&&(r=n+/[^\/\\]*$/.exec(r)[0]),null!=e&&(r=e(r)),await mt(r),wt})();console.log(t);const e=t.BfMachineState,n=e.new();new Y({target:document.body,props:{newState:e.new,state:n,program:t.BfProgram,presets:yt}})})()}();
//# sourceMappingURL=bundle.js.map
